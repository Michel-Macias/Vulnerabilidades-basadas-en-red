# Práctica de Laboratorio: Ataque de Denegación de Servicio (DoS)

---

### ⚠️ Advertencia Legal y Ética

**Este laboratorio demuestra un ataque de Denegación de Servicio con fines puramente educativos. La ejecución de este tipo de ataques contra sistemas, redes o servicios que no son de tu propiedad o para los que no tienes permiso explícito es ilegal y puede tener consecuencias penales graves.**

**Toda la información y los comandos aquí presentados deben ser utilizados únicamente en un entorno de laboratorio controlado y aislado, sobre máquinas virtuales de tu propiedad. El autor y el asistente no se hacen responsables del mal uso de esta información.**

---

**Objetivo:** Simular un ataque de Denegación de Servicio de tipo **SYN Flood** desde una máquina Kali Linux contra un servicio en una máquina víctima, utilizando la herramienta `hping3`.

**Máquinas Requeridas:**
*   Una VM con Kali Linux (atacante).
*   Una VM víctima (puede ser Windows 8.1, Windows Server, o cualquier otra que tenga un puerto abierto, como el puerto 445 de SMB).

**Herramientas:**
*   `hping3`: Una herramienta de crafteo y análisis de paquetes TCP/IP.

---

## Parte 1: Preparación

### Paso 1: Identificar el Objetivo

Primero, necesitamos identificar la dirección IP de la víctima y un puerto que tenga abierto. Podemos usar `nmap` para esto.

```bash
# Reemplaza [IP_VICTIMA] con la IP de tu máquina Windows
sudo nmap -p- [IP_VICTIMA]
```

Busca en la salida un puerto que esté en estado `OPEN`. Para una máquina Windows, el puerto **445** (servicio `microsoft-ds` o SMB) es un objetivo casi seguro.

### Paso 2: Instalar hping3

Asegúrate de que `hping3` esté instalado en tu máquina Kali.

```bash
sudo apt-get update
sudo apt-get install hping3
```

---

## Parte 2: Ejecución del Ataque SYN Flood

Un ataque SYN Flood explota el handshake de tres vías de TCP. Enviamos una avalancha de paquetes `SYN` (petición de conexión), forzando al servidor a reservar recursos para cada una de estas peticiones "semi-abiertas". El servidor espera un `ACK` que nunca llegará, y su tabla de conexiones se llena, impidiendo que los usuarios legítimos puedan conectarse.

### El Comando `hping3`

Usaremos `hping3` con las siguientes opciones:

*   `-c [número]`: El número de paquetes a enviar. Usaremos un número alto.
*   `-d [tamaño]`: El tamaño de cada paquete.
*   `-S`: Poner el flag SYN en los paquetes.
*   `-w [tamaño_ventana]`: El tamaño de la ventana TCP.
*   `-p [puerto]`: El puerto de destino (ej: 445).
*   `--flood`: Modo "inundación". Envía paquetes tan rápido como sea posible, sin esperar respuesta. Este es el modo más agresivo.
*   `--rand-source`: Usar direcciones IP de origen aleatorias (spoofing). Esto hace más difícil que el objetivo bloquee el ataque, ya que los paquetes parecen venir de muchos sitios diferentes.

### Lanzar el Ataque

Desde tu máquina Kali, ejecuta el siguiente comando. **Prepárate para que la máquina víctima se vuelva lenta o deje de responder en la red.**

```bash
# Sintaxis: sudo hping3 -c <paquetes> -d <tamaño> -S -w <ventana> -p <puerto> --flood --rand-source <IP_VICTIMA>

sudo hping3 -c 100000 -d 120 -S -w 64 -p 445 --flood --rand-source [IP_VICTIMA]
```

**Análisis de la Ejecución:**
*   `hping3` empezará a enviar paquetes a la máxima velocidad posible.
*   No verás una respuesta por cada paquete porque estamos en modo `--flood`.
*   Mientras el ataque está en curso, intenta hacer un `ping` a la máquina víctima desde otra terminal, o intenta acceder a uno de sus recursos compartidos. Notarás que la latencia es muy alta o que la conexión falla por completo.

### Detener el Ataque

Para detener el ataque, simplemente presiona `Ctrl+C` en la terminal donde se está ejecutando `hping3`. La máquina víctima debería recuperar la normalidad poco después.

---

## Conclusión

Has simulado con éxito un ataque DoS de tipo SYN Flood. Este laboratorio demuestra lo fácil que es, con las herramientas adecuadas, agotar los recursos de un servidor y dejarlo inaccesible para los usuarios legítimos. En un escenario real, este ataque se realizaría de forma distribuida (DDoS) desde una botnet, haciéndolo mucho más potente y difícil de mitigar.

La defensa contra este tipo de ataques generalmente no recae en el servidor final, sino en dispositivos de red intermedios (firewalls, sistemas de prevención de intrusiones) o en servicios anti-DDoS en la nube, que son capaces de detectar y filtrar este tipo de tráfico anómalo.